{% extends 'base.html' %}

{% block title %}Reservation Entry - Smart Hotel{% endblock %}

{% block content %}
<div class="reservation-page">
	<div class="card p-4 p-md-5">
		<div class="reservation-header">
			<div class="icon-box icon-brand">
				<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16"><path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6V4.5zM1.5 4a.5.5 0 0 0-.5.5v1.05a2.5 2.5 0 0 1 0 4.9v1.05a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-1.05a2.5 2.5 0 0 1 0-4.9V4.5a.5.5 0 0 0-.5-.5h-13z"/></svg>
			</div>
			<div>
				{% if reservation_type == "pre_booked" %}
				<h1 data-i18n="confirmed_reservation">Confirmed Reservation</h1>
				<span class="badge bg-success mb-2" style="font-size: 0.9rem;">
					<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 4px;"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/></svg>
					Pre-Booked
				</span>
				{% else %}
				<h1 data-i18n="new_reservation">New Reservation</h1>
				<span class="badge bg-info mb-2" style="font-size: 0.9rem;">
					<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 4px;"><path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5z"/></svg>
					Walk-in Guest
				</span>
				{% endif %}
				<p>Guest: <strong>{% if guest %}{{ guest.first_name }} {{ guest.last_name }}{% else %}Guest{% endif %}</strong></p>
			</div>
		</div>
		
		<form method="post">
			{% csrf_token %}
			
			{% if reservation_type == "pre_booked" and existing_reservation %}
			<!-- Pre-booked reservation - show existing details as read-only -->
			<div class="mb-4">
				<label class="form-label fw-bold" data-i18n="reservation_number_label">Reservation Number</label>
				<div class="input-icon-wrapper">
					<svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6V4.5z"/></svg>
					<input class="form-control form-control-lg" name="reservation_number" value="{{ existing_reservation.confirmation_number }}" readonly style="background-color: #f8f9fa;">
				</div>
			</div>
			<div class="row g-3 mb-4">
				<div class="col-6">
					<label class="form-label fw-bold" data-i18n="number_of_people">Number of People</label>
					<input class="form-control form-control-lg" type="number" name="people_count" value="{{ existing_reservation.people_count|default:1 }}" min="1">
				</div>
				<div class="col-6">
					<label class="form-label fw-bold" data-i18n="number_of_rooms">Number of Rooms</label>
					<input class="form-control form-control-lg" type="number" name="room_count" value="{{ existing_reservation.room_count|default:1 }}" min="1">
				</div>
			</div>
			<input type="hidden" name="checkin" value="{{ existing_reservation.checkin }}">
			<input type="hidden" name="checkout" value="{{ existing_reservation.checkout }}">
			
			{% else %}
			<!-- Walk-in - allow full entry -->
			<div class="mb-4">
				<label class="form-label fw-bold" data-i18n="reservation_number_label">Reservation Number <small class="text-muted">(optional - auto-generated if empty)</small></label>
				<div class="input-icon-wrapper">
					<svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6V4.5z"/></svg>
					<input class="form-control form-control-lg" name="reservation_number" value="{{ suggested_resnum }}" placeholder="Leave empty to auto-generate">
				</div>
			</div>
			<div class="row g-3 mb-4">
				<div class="col-6">
					<label class="form-label fw-bold" data-i18n="number_of_people">Number of People</label>
					<input class="form-control form-control-lg" type="number" name="people_count" value="1" min="1">
				</div>
				<div class="col-6">
					<label class="form-label fw-bold" data-i18n="number_of_rooms">Number of Rooms</label>
					<input class="form-control form-control-lg" type="number" name="room_count" value="1" min="1">
				</div>
			</div>
			<input type="hidden" name="checkin" value="{{ request.GET.checkin|default:'' }}">
			<input type="hidden" name="checkout" value="{{ request.GET.checkout|default:'' }}">
			{% endif %}
			
			<button class="btn btn-primary btn-lg w-100" data-i18n="continue_checkin">
				Continue Check-in
				<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16" style="margin-left: 8px;"><path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/></svg>
			</button>
		</form>
	</div>
</div>
{% endblock %}
