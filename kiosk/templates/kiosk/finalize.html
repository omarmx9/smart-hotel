{% extends 'base.html' %}

{% block title %}Registration Complete - Smart Hotel{% endblock %}

{% block content %}
<div class="complete-page">
	<div class="card p-4 p-md-5">
		<div class="success-header">
			<div class="icon-box icon-box-lg icon-success">
				<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg>
			</div>
			<h1 data-i18n="registration_complete">Registration Complete!</h1>
			<p class="text-muted mb-0">Your check-in is complete. Welcome to Smart Hotel!</p>
		</div>
		
		<div class="row g-3 mb-4">
			<div class="col-6 col-md-3">
				<div class="info-card">
					<small data-i18n="reservation">Reservation</small>
					<strong>{{ reservation.reservation_number|default:"N/A" }}</strong>
				</div>
			</div>
			<div class="col-6 col-md-3">
				<div class="info-card">
					<small data-i18n="guest">Guest</small>
					<strong>{% if reservation.guest %}{{ reservation.guest.first_name }} {{ reservation.guest.last_name }}{% else %}Guest{% endif %}</strong>
				</div>
			</div>
			<div class="col-6 col-md-3">
				<div class="info-card">
					<small data-i18n="access_method">Access</small>
					<strong>{{ access_method|default:"keycard" }}</strong>
				</div>
			</div>
			<div class="col-6 col-md-3">
				<div class="info-card">
					<small data-i18n="people">People</small>
					<strong>{{ reservation.people_count|default:"1" }}</strong>
				</div>
			</div>
		</div>

		{% if reservation.keycards_submitted %}
		<div class="alert alert-success d-flex align-items-center gap-2" data-i18n="submit_keycards">
			<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg>
			<span>Keycards submitted. Thank you.</span>
		</div>
		{% else %}
		<form method="post" action="{% url 'kiosk:submit_keycards' reservation.id %}">
			{% csrf_token %}
			<div class="p-3 rounded mb-3" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, transparent 100%); border: 1px solid rgba(245, 158, 11, 0.2);">
				<strong data-i18n="return_keycards">Return keycards</strong>
				<p class="mb-0 mt-1 text-muted" data-i18n="submit_keycards">Please submit your keycards now if applicable.</p>
			</div>
			<button class="btn btn-primary" data-i18n="submit_keycards">Submit Keycards</button>
		</form>
		{% endif %}
		
		{% if 'keycard' in access_method %}
		<div class="mt-3 text-center">
			<a href="{% url 'kiosk:report_stolen_card' reservation.id %}" class="btn btn-outline-danger btn-sm">
				<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16" style="margin-right: 6px;">
					<path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
				</svg>
				<span data-i18n="report_lost_stolen">Report Lost/Stolen Card</span>
			</a>
		</div>
		{% endif %}

		{% if reservation.paid %}
		<div class="alert alert-info mt-3 d-flex align-items-center gap-2" data-i18n="payment_complete">
			<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/></svg>
			<span>Payment complete.</span>
		</div>
		{% else %}
		<div class="alert alert-warning mt-3" data-i18n="payment_pending">Payment pending. Any balance will be finalized on keycard submission.</div>
		{% endif %}
	</div>

	<div class="card p-4 p-md-5 mt-4">
		<div class="d-flex align-items-center justify-content-center gap-3 mb-4">
			<div class="icon-box icon-brand">
				<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/></svg>
			</div>
			<h2 class="mb-0" data-i18n="route_title">Route to Your Room</h2>
		</div>
		
		<div class="room-display">
			<small data-i18n="your_room">Your Room</small>
			<div class="room-number">{{ room_number|default:"---" }}</div>
		</div>

		<div class="ratio ratio-16x9">
			<iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Route demo" allowfullscreen></iframe>
		</div>
	</div>
{% endblock %}
