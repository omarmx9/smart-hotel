# ============================================================================
# Smart Hotel Cloud Infrastructure - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in the values.
# Run ./generate-env.sh to auto-generate secure secrets.
#
# IMPORTANT: Never commit the .env file to version control!
# ============================================================================

# ============================================================================
# TIMEZONE
# ============================================================================
# Set your local timezone (used by Node-RED and other services)
TIMEZONE=UTC

# ============================================================================
# SESSION SETTINGS
# ============================================================================
# Session cookie lifetime in seconds (default: 7 days = 604800)
# Hotel guests typically stay multiple days, so longer sessions are appropriate
SESSION_COOKIE_AGE=604800

# OIDC token renewal interval in seconds (default: 15 minutes = 900)
OIDC_TOKEN_EXPIRY=900

# ============================================================================
# POSTGRESQL - Main Application Database
# ============================================================================
# Database name for Django application (rooms, reservations)
POSTGRES_DB=smarthotel

# Database user
POSTGRES_USER=smarthotel

# Database password
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD

# ============================================================================
# INFLUXDB - Time-Series Database
# ============================================================================
# Port for InfluxDB HTTP API
INFLUX_PORT=8086

# Admin username
INFLUX_ADMIN_USER=admin

# Admin password
# Generate with: openssl rand -base64 32
INFLUX_ADMIN_PASSWORD=CHANGE_ME_INFLUX_PASSWORD

# Organization name
INFLUX_ORG=smarthotel

# Default bucket for sensor data
INFLUX_BUCKET=sensors

# Data retention (0 = infinite, or specify like "30d", "1y")
INFLUX_RETENTION=0

# API token for service access
# Generate with: openssl rand -hex 32
INFLUX_TOKEN=CHANGE_ME_INFLUX_TOKEN

# ============================================================================
# MQTT - Mosquitto Broker
# ============================================================================
# MQTT TCP port
MQTT_PORT=1883

# MQTT WebSocket port
MQTT_WS_PORT=9001

# MQTT Authentication (Optional but recommended for production)
# When set, update mosquitto.conf: set allow_anonymous to false
# and uncomment password_file directive
MQTT_USER=
MQTT_PASSWORD=

# ============================================================================
# DJANGO DASHBOARD
# ============================================================================
# Port for the Django dashboard
DASHBOARD_PORT=8001

# Django secret key for cryptographic signing
# Generate with: openssl rand -base64 64
DJANGO_SECRET_KEY=CHANGE_ME_DJANGO_SECRET

# Set to True only for development!
DJANGO_DEBUG=False

# Comma-separated list of allowed hosts (use * for development only)
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# ============================================================================
# GRAFANA
# ============================================================================
# Port for Grafana UI
GRAFANA_PORT=3000

# Admin username
GRAFANA_ADMIN_USER=admin

# Admin password
# Generate with: openssl rand -base64 24
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# Public URL for Grafana (used for OAuth callbacks)
GRAFANA_ROOT_URL=http://localhost:3000

# Enable Authentik OAuth for Grafana (set to true to enable SSO)
GRAFANA_OAUTH_ENABLED=false

# Grafana OAuth client ID (create in Authentik)
GRAFANA_OAUTH_CLIENT_ID=grafana

# Grafana OAuth client secret (from Authentik)
GRAFANA_OAUTH_CLIENT_SECRET=

# ============================================================================
# AUTHENTIK - Identity Provider
# ============================================================================
# Authentik version tag
AUTHENTIK_TAG=2024.10

# Port for Authentik HTTP
AUTHENTIK_PORT=9000

# Port for Authentik HTTPS
AUTHENTIK_PORT_HTTPS=9443

# External URL for Authentik (what users see in browser)
# IMPORTANT: This must be accessible from user browsers for OAuth to work
AUTHENTIK_EXTERNAL_URL=http://localhost:9000

# Authentik secret key for cryptographic operations
# Generate with: openssl rand -base64 64
AUTHENTIK_SECRET_KEY=CHANGE_ME_AUTHENTIK_SECRET

# Authentik PostgreSQL password
# Generate with: openssl rand -base64 32
AUTHENTIK_POSTGRES_PASSWORD=CHANGE_ME_AUTHENTIK_PG_PASSWORD

# ============================================================================
# OIDC - OpenID Connect (Django <-> Authentik)
# ============================================================================
# OIDC Client ID (create OAuth2 Provider in Authentik)
OIDC_CLIENT_ID=smart-hotel

# OIDC Client Secret (from Authentik OAuth2 Provider)
# Generate in Authentik when creating the OAuth2 provider
OIDC_CLIENT_SECRET=CHANGE_ME_OIDC_SECRET

# ============================================================================
# NODE-RED - SMS Gateway (Headless)
# ============================================================================
# Port for Node-RED API (editor is disabled in headless mode)
NODERED_PORT=1880

# Credential encryption secret
# Generate with: openssl rand -hex 32
NODERED_CREDENTIAL_SECRET=CHANGE_ME_NODERED_SECRET

# ============================================================================
# TWILIO - SMS Integration (via Node-RED)
# ============================================================================
# Get these from https://console.twilio.com/
# Leave empty to disable SMS functionality
#
# Account SID (starts with "AC")
TWILIO_ACCOUNT_SID=

# Auth Token (from Twilio console)
TWILIO_AUTH_TOKEN=

# Phone number to send SMS from (E.164 format: +1234567890)
TWILIO_PHONE_NUMBER=

# ============================================================================
# TELEGRAM - Bot Notifications (Optional)
# ============================================================================
# Create a bot with @BotFather to get the token
# Get chat ID by messaging the bot and checking:
# https://api.telegram.org/bot<TOKEN>/getUpdates
#
# Bot token (format: 123456789:ABCdefGHIjklMNOpqrSTUvwxYZ)
TELEGRAM_BOT_TOKEN=

# Chat ID to send notifications to
TELEGRAM_CHAT_ID=

# ============================================================================
# SMTP - Email Configuration (Optional, for Authentik)
# ============================================================================
# SMTP server hostname
SMTP_HOST=

# SMTP port (587 for TLS, 465 for SSL)
SMTP_PORT=587

# SMTP username
SMTP_USER=

# SMTP password
SMTP_PASSWORD=

# Use TLS (true/false)
SMTP_USE_TLS=true

# From address for emails
SMTP_FROM=noreply@example.com

# ============================================================================
# KIOSK APPLICATION
# ============================================================================
# Port for the kiosk application
KIOSK_PORT=8002

# Kiosk secret key
# Generate with: openssl rand -base64 64
KIOSK_SECRET_KEY=CHANGE_ME_KIOSK_SECRET

# Debug mode (0 = production, 1 = development)
KIOSK_DEBUG=0

# Allowed hosts for kiosk
KIOSK_ALLOWED_HOSTS=*
